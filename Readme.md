<h1>#Z</h1>

<h3>Проект для экспериментов с моделями последовательно-параллельных вычислений и способами их описания</h3>
<p>Цель проекта - создание удобного синтаксиса для конструирования процессов вычислений в декларативном стиле.</p> 
<h4><ul>Планировалось создать грамматику и модуль интерпретации программ с элементами:</h4>
 <li> многоуровневость - вложенность вычислительных ядер для построения иерархии вычислений (составные ядра, аналог вложенности классов в ООП),</li>
 <li> применение оператора "клонирования" ядер вычислений (аналог инициализации массива объектов конструктором по умолчанию), </li>
 <li>автоматическое построение связей при каскадных соединениях составных ядер (аналог оператора "конвейера" в F#),
 </li> 
 <li>применение шаблона с настройками для конструирования ядер</li>
 </p>
 </ul>

<p>Предполагаемый пример программы (грамматика нереализована):</p>
<p>
    <code><pre>
    Test : {    //Создание ядра с именем Test, внутри которого описание других ядер
        s (x1+x2+x3+x4) : { x1, x2, x3, x4 },   //Создание ядра s, вычисляющего сумму результатов ядер x1, x2, x3, x4
        a (1/(1+s*s)) : { s },  //создание ядра, функция Ферми
        v : { y1, y2, y3, y4 }, //ядро, расчетверяющее значение
        n (a) : { s->.a->.v }   //ядро связывающее три определённых выше ядра в цепь (передача значений символом ->)
    }
   </pre> </code>
</p>

<p>Была реализована только модель вычислений, без грамматики языка</p>
<p>Основной класс Kernel - реализует основные операции по производству вычислений.
Класс Message - обеспечивает хранение и передачу пакета данных от одного ядра в другое.
Expression - класс реализующий математические операции с данными.</p>

<p>
Примеры создания вычислительной модели приведены в Program.cs и KernelTests.cs
</p>

<p>Для приведенного выше примера программы модель на C# выглядит следующим образом:
</p>
<code><pre>
static void Test3() {
    //создание ядра, функцию ферми
    Kernel s = new Kernel("s", "input", "s",
        new NaryExpression("+",
            new NularyExpression("x1"),
            new NularyExpression("x2"),
            new NularyExpression("x3"),
            new NularyExpression("x4")),
        new Kernel("x1"), new Kernel("x2"), new Kernel("x3"), new Kernel("x4"));
    //создание ядра, функцию ферми
    Kernel a = new Kernel("a", "s", "v",
        new BinaryExpression("/",
            new NularyExpression(1),
            new BinaryExpression("+",
                new NularyExpression(1),
                new UnaryExpression("sqr", new NularyExpression("s")))),
        new Kernel("s"));
    Kernel v = new Kernel("v", "a", "y", null,
        new Kernel("y1", "v", ""),
        new Kernel("y2", "v", ""),
        new Kernel("y3", "v", ""),
        new Kernel("y4", "v", "")
        );
    //ядро связывающее три определённых выше ядра в цепь
    Kernel n = new Kernel("n", new NularyExpression("a"), s, a, v);
    n["s"].Put(new Message("input", 0,
        new Message("x1", 1),
        new Message("x2", 1),
        new Message("x3", 1),
        new Message("x4", 1)));
    //Запуск и вывод результатов вычислений
    for (int i = 0; i < 8; i++)
    {
        n.Evaluate();
        Console.WriteLine(n.Data + " ~ " + 1.0/(1.0+Math.Pow(4,2)));
    }
}
</pre> </code>